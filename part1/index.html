<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Login</title>
    <script src="https://unpkg.com/vue@3"></script>
  </head>

  <body>
    <h2>Click button to see dog!</h2>

    <button type="button">Login</button>
    <button id="themeToggle" type="button">Dark Mode!</button>

    <script>
      const { createApp } = Vue;

      createApp({
        data() {
          return {
            email: '',
            password: '',
            errorMessage: ''
          };
        },
        methods: {
          async getDog() {
            const {message, status} = await fetch('https://dog.ceo/api/breeds/image/random');
          }
          async handleLogin() {
            if (!this.email || !this.password) {
              this.errorMessage = 'Please enter both email and password.';
              return;
            }
            const { status } = await fetch('/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                email: this.email,
                password: this.password
              })
            });
            if (status === 200) {
              window.location.href = '/user/home';
              return;
            } else {
              this.errorMessage = 'Invalid email or password.';
              return;
            }
          },
          goToRegister() {
            window.location.href = '/register-page';
          }
        },
        mounted() {
          const isDark = localStorage.getItem('theme') === 'dark';
          document.body.classList.toggle('dark-mode', isDark);
          const toggleBtn = document.getElementById('themeToggle');
          toggleBtn.innerText = isDark ? '‚òÄÔ∏è Light' : 'üåô Dark';
          toggleBtn.addEventListener('click', () => {
            const isNowDark = document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', isNowDark ? 'dark' : 'light');
            toggleBtn.innerText = isNowDark ? '‚òÄÔ∏è Light' : 'üåô Dark';
          });
        }
      }).mount('#app');
    </script>
  </body>
</html>
